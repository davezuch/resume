document.querySelectorAll||(document.querySelectorAll=function(a){var b,c=document.createElement("style"),d=[];for(document.documentElement.firstChild.appendChild(c),document._qsa=[],c.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),c.parentNode.removeChild(c);document._qsa.length;)b=document._qsa.shift(),b.style.removeAttribute("x-qsa"),d.push(b);return document._qsa=null,d}),document.querySelector||(document.querySelector=function(a){var b=document.querySelectorAll(a);return b.length?b[0]:null}),window.DZ=function(){Array.prototype.each=function(a){for(var b=0,c=this.length;c>b&&!1!==a.call(this[b],b);b++);return this};var a=window,b=a.document,c=b.querySelector&&b.querySelector('meta[name="viewport"]'),d=navigator.userAgent,e=Array.prototype.slice;return{UA:d,scaleFix:function(){c&&/iPhone|iPad|iPod/.test(d)&&!/Opera Mini/.test(d)&&(c.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.addEventListener("gesturestart",this.gestureStart,!1))},gestureStart:function(){c.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},hideUrlBarOnLoad:function(){var c,d=this;!location.hash&&a.addEventListener&&(a.scrollTo(0,1),d.BODY_SCROLL_TOP=1,c=setInterval(function(){b.body&&(clearInterval(c),d.BODY_SCROLL_TOP=d.getScrollTop(),d.hideUrlBar())},15),d.addEvent(a,"load",function(){setTimeout(function(){d.getScrollTop()<20&&d.hideUrlBar()},0)}))},hideUrlBar:function(){location.hash||this.BODY_SCROLL_TOP===!1||a.scrollTo(0,1===this.BODY_SCROLL_TOP?0:1)},getScrollTop:function(){return a.pageYOffset||"CSS1Compat"===b.compatMode&&b.documentElement.scrollTop||b.body.scrollTop||0},enableActive:function(){b.addEventListener("touchstart",function(){},!1)},getId:function(a,b){return(b||document).getElementById(a)},getTags:function(a,b){return e.call((b||document).getElementsByTagName(a),0)},matchOne:function(a,b){return a.each&&a[0]&&"string"==typeof a[0]&&(a=a[0]),"string"==typeof a?/^#[^\s><+~*\[\]]+$/.test(a)?this.getId(a.substr(1)):(b||document).querySelector(a):a.each?a[0]:a},match:function(a,b){return a.each&&a[0]&&"string"==typeof a[0]&&(a=a.join(", ")),"string"==typeof a?/^#[^\s><+~*\[\]]+$/.test(a)?[this.getId(a.substr(1))]:e.call((b||document).querySelectorAll(a),0):a.tagName||a===window||a===document?[a]:a},hasClass:function(a,b){a=this.matchOne(a),b=b.split(" ");for(var c=0,d=b.length,e=!1;d>c;c++)if(a&&-1!==(" "+a.className+" ").indexOf(" "+b[c]+" ")){e=!0;break}return e},removeClass:function(a,b){return a=this.match(a),b=b.split(" "),a.each(function(){if(this&&"className"in this)for(var a=0,c=b.length;c>a;a++)this.className=(" "+this.className+" ").replace(" "+b[a]+" "," ").trim()}),a},addClass:function(a,b){var c=this;return a=this.match(a),b=b.split(" "),a.each(function(){for(var a=0,d=b.length;d>a;a++)this&&!c.hasClass(this,b[a])&&(this.className=this.className.trim()+" "+b[a])}),a},toggleClass:function(a,b){var c=this;return a=this.match(a),b=b.split(" "),a.each(function(){for(var a=0,d=b.length;d>a;a++)c.hasClass(this,b[a])?c.removeClass(this,b[a]):c.addClass(this,b[a])}),a},addEvent:function(a,b,c){var d=this;a=this.match(a),b=b.split(" "),a.each(function(){for(var a=0,e=b.length;e>a;a++)d._addEvent(this,b[a],c)})},_addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c.call(a)})},newStyle:function(a){if(!a||"string"!=typeof a)return!1;var b=document.getElementsByTagName("head")[0],c=document.createElement("style");return c.type="text/css",c.media="screen",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c),c},updateStyle:function(a,b){return a&&"style"===a.tagName.toLowerCase()?(a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b)),a):this.newStyle(b)},replaceStyle:function(a,b){return a&&"style"===a.tagName.toLowerCase()&&a.parentNode.removeChild(a),this.newStyle(b)},getStyle:function(a,b){return a=this.matchOne(a),window.getComputedStyle?window.getComputedStyle(a)[b]:a.currentStyle?a.currentStyle[b]:a.style[b]}}}(),Modernizr.addTest("backgroundclip",function(){var a=document.createElement("div");return"webkitBackgroundClip"in a.style?!0:("Webkit Moz O ms Khtml".replace(/([A-Za-z]*)/g,function(b){return b+"BackgroundClip"in a.style?!0:void 0}),void 0)}),function(){function a(){function a(){var a=window.scrollY;a>=d?DZ.addClass(m,"sticky"):DZ.removeClass(m,"sticky")}var b=DZ.matchOne("header div.belt"),c=(b.scrollHeight,DZ.matchOne("header nav")),d=c.offsetTop,e=c.scrollHeight;DZ.newStyle("body.sticky { padding-top: "+e+"px; }"),DZ.addEvent(m,"scroll",a)}function b(a,b){if(a){b=b||500;var c=DZ.matchOne("header").offsetHeight,d=m.scrollTop,e=isNaN(a)?a.offsetTop+c:a,f=(new Date).getTime(),g=setInterval(function(){var a=Math.min(1,((new Date).getTime()-f)/b);m.scrollTop=d+a*(e-d),1===a&&clearInterval(g)},25)}}function c(a){var c=window.location.hash;a.preventDefault(),c?b(DZ.matchOne(c)):b(0)}function d(){DZ.addClass(n,"show"),o=!0}function e(){DZ.removeClass(n,"show"),o=!1}function f(a){o&&"nav-toggle"!==a.target.id&&e();var c=a.target.hash;c&&(a.preventDefault(),b(DZ.matchOne(c)),window.history.pushState&&window.history.pushState({hash:c},c,c))}function g(a){var b=DZ.match(".required",a),c=[];return b.each(function(){return this.value?"email"!==this.type||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value)?void 0:c.push({field:this,msg:"Please enter a valid email address."}):c.push({field:this,msg:"This field is required."})}),c}function h(){if(this.value&&("email"!==this.type||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value))){var a=this.parentNode;DZ.hasClass(a,"textbelt")&&(a=a.parentNode),DZ.removeClass(a,"error")}}function i(a){var b=encodeURIComponent(JSON.stringify({name:a.name.value,email:a.email.value,subject:a.subject.value,message:a.message.value})),c=new XMLHttpRequest;return w.indexOf(b)>-1?j("I appreciate your desire to contact me, but the first email sent just fine, no need for another."):(DZ.addClass(q,"on"),c.onreadystatechange=function(){if(console.log("readyState:",c.readyState),4===c.readyState)if(DZ.removeClass(q,"on"),200===c.status)w.push(b),j();else{r.innerHTML=['Sorry, there was an error with your submission. Please try again or send an email to: <a href="mailto:resume','davidzuch.me">resume',"davidzuch.me</a>"].join("@"),DZ.removeClass(r,"hide");var a=r.offsetHeight;r.style.height="0",setTimeout(function(){r.style.height=a+"px"},1)}},c.open("POST","/send",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send("data="+b),void 0)}function j(a){a&&(p=v.innerHTML,v.innerHTML=a),s.each(function(){this.style.left="-100%"}),s[0].style.height=u.offsetHeight+"px",setTimeout(function(){s[0].style.height=t.offsetHeight+"px"},1)}function k(){s.each(function(){this.style.left="0"}),s[0].style.height=t.offsetHeight+"px",setTimeout(function(){s[0].style.height=u.offsetHeight+"px"},1),p&&setTimeout(function(){v.innerHTML=p,p=""},500)}function l(a){a.preventDefault();var b=this,c=g(b);DZ.removeClass(DZ.match(".error",b),"error"),DZ.addClass(r,"hide"),r.innerHTML="",r.style.height="",c.length?(c.each(function(){DZ.addClass(this.field.parentNode,"error")}),c[0].field.focus()):i(b)}DZ.scaleFix(),DZ.hideUrlBarOnLoad(),DZ.enableActive();var m=DZ.UA.match(/webkit/i)?document.body:document.documentElement;DZ.addEvent(document,"DOMContentLoaded",a),DZ.addEvent(window,"load",a);var n=DZ.getId("nav-belt"),o=!1;DZ.addEvent(document.documentElement,"click touchend",f),DZ.addEvent(window,"popstate",c),DZ.addEvent("#nav-toggle","click",d),DZ.match(".textbelt textarea").each(function(){var a=this,b=this.parentNode,c=(this.offsetHeight,function(){var c=a.cloneNode();return c.removeAttribute("name"),c.removeAttribute("id"),DZ.addClass(c,"offscreen"),c.setAttribute("tabIndex","-1"),b.parentNode.insertBefore(c,b),c}()),d=null,e=function(){b.scrollTop=0,c.style.height="",c.value=a.value;var e=c.scrollHeight-3;d!==e&&(d=e,b.style.height=e+"px",c.style.height=e+"px")};DZ.addEvent(a,"keyup keydown change blur",e)});var p,q=DZ.getId("loader"),r=DZ.getId("form-error"),s=DZ.match(".pan"),t=DZ.getId("thanks"),u=DZ.getId("draft"),v=DZ.matchOne("p",t),w=[];DZ.addEvent("form","submit",l),DZ.addEvent(".required","keyup change blur",h),DZ.addEvent("#return","click",k),DZ.match("h2, h3").each(function(){this.innerHTML=this.innerHTML.replace(/(.)$/,'<span class="last-letter">$1</span>')})}();